<!DOCTYPE html>
<html  xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>현규의 웹 서비스 세상 *^^*</title>
<!-- Custom styles for this template-->
<link th:href="@{/css/sb-admin.css}" rel="stylesheet" type="text/css"/>

</head>
<body class="bg-dark">
<div class="container">
    <div class="card card-register mx-auto mt-5">
        <div class="card-header">Register an Account</div>
        <div class="card-body">
            <form>
                <div class="form-group">
                    <div class="form-row">
                        <div class="col-md-6">
                            <div class="form-label-group">
                                <input type="text" id="adminId" class="form-control" placeholder="First name" required="required" autofocus="autofocus">
                                <label for="adminId">아이디</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-label-group">
                                <input type="text" id="name" class="form-control" placeholder="Last name" required="required">
                                <label for="name">이름</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-row">
                        <div class="col-md-6">
                            <div class="form-label-group">
                                <input type="password" id="adminPassword" class="form-control" placeholder="Password" required="required">
                                <label for="adminPassword">비밀번호</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-label-group">
                                <input type="password" id="confirmPassword" class="form-control" placeholder="Confirm password" required="required">
                                <label for="confirmPassword">비밀번호 확인</label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <div class="form-label-group">
                        <input type="text" id="tellNumber" class="form-control" placeholder="연락처" required="required">
                        <label for="name">연락처</label>
                    </div>
                </div>
<!--                <div class="form-group">-->
<!--                    <div class="form-row">-->
<!--                        <div class="col-md-6">-->
<!--                            <div class="form-label-group">-->
<!--                                <input type="text" id="bank" class="form-control" placeholder="Password" required="required">-->
<!--                                <label for="bank">은행</label>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="col-md-6">-->
<!--                            <div class="form-label-group">-->
<!--                                <input type="password" id="bankNum" class="form-control" placeholder="Confirm password" required="required">-->
<!--                                <label for="bankNum">계좌번호</label>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
                <button class="btn btn-primary btn-block" id="joinAdmin">사용자로 가입</button>
                <button class="btn btn-primary btn-block" id="joinUser">관리자로 가입</button>
            </form>
            <div class="text-center">
                <a class="d-block small mt-3" href="/">Login Page</a>
            </div>
        </div>
    </div>
</div>
<script>
    document.getElementById('joinAdmin').addEventListener('click', e => signup(admin));
    document.getElementById('joinUser').addEventListener('click', e => signup(user));
    async function signup(who) {
        // let x = document.querySelector('body > div > div > div.col-sm-8.text-left');
        console.log("가입하기 gogo");
        try {
            let res = await fetch(`/api/${who}` , {
                method:'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Charset': 'UTF-8'
                },
                body: JSON.stringify({
                    adminId: document.getElementById(`${who}Id`).value,
                    adminPassword: document.getElementById(`${who}Password`).value,
                    confirmPassword: document.getElementById('confirmPassword').value,
                    name: document.getElementById('name').value,
                    tellNumber: document.getElementById('tellNumber').value,
                    // bank: document.getElementById('bank').value
                })
            });
            if(res.ok) document.location.href="/";
            alert("가입이 완료되었습니다!");
            // if(data.adminPassword === data.confirmPassword){
            //     if(res.ok) document.location.href="/";
            //     alert("가입이 완료되었습니다!");
            // }else {
            //     alert("비밀번호를 확인해주세요");
            //     document.location.href="/join";
            // }

        } catch (e) {
        }
    }
</script>
</body>
</html>